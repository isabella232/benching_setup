# Migration `20190924170714-string-ids`

This migration has been generated by Julius de Bruijn at 9/24/2019, 5:07:14 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "benchmark"."Artist" (
  "ArtistId" text NOT NULL  ,
  "Name" text   ,
  PRIMARY KEY ("ArtistId")
);

CREATE TABLE "benchmark"."Album" (
  "AlbumId" text NOT NULL  ,
  "Title" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("AlbumId")
);

CREATE TABLE "benchmark"."Track" (
  "Composer" text   ,
  "Milliseconds" integer NOT NULL DEFAULT 0 ,
  "Name" text NOT NULL DEFAULT '' ,
  "TrackId" text NOT NULL  ,
  "UnitPrice" Decimal(65,30) NOT NULL DEFAULT 0 ,
  PRIMARY KEY ("TrackId")
);

CREATE TABLE "benchmark"."Genre" (
  "GenreId" text NOT NULL  ,
  "Name" text   ,
  PRIMARY KEY ("GenreId")
);

CREATE TABLE "benchmark"."MediaType" (
  "MediaTypeId" text NOT NULL  ,
  "Name" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("MediaTypeId")
);

ALTER TABLE "benchmark"."Album" ADD COLUMN "ArtistId" text   REFERENCES "benchmark"."Artist"("ArtistId") ON DELETE SET NULL;

ALTER TABLE "benchmark"."Track" ADD COLUMN "AlbumId" text   REFERENCES "benchmark"."Album"("AlbumId") ON DELETE SET NULL,
ADD COLUMN "GenreId" text   REFERENCES "benchmark"."Genre"("GenreId") ON DELETE SET NULL;

ALTER TABLE "benchmark"."MediaType" ADD COLUMN "track" text   REFERENCES "benchmark"."Track"("TrackId") ON DELETE SET NULL;
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20190923175854-init..20190924170714-string-ids
--- datamodel.dml
+++ datamodel.dml
@@ -7,22 +7,22 @@
   url      = "postgresql://postgres:prisma@localhost:5432/postgres?schema=benchmark"
 }
 model Artist {
-  id Int @id @map(name:"ArtistId")
+  id String @id @default(cuid()) @map(name:"ArtistId")
   Name String?
   Albums Album[]
 }
 model Album {
-  id Int @id @map(name:"AlbumId")
+  id String @id @default(cuid()) @map(name:"AlbumId")
   Title String
   Artist Artist @map(name:"ArtistId")
   Tracks Track[]
 }
 model Track {
-  id Int @id @map(name:"TrackId")
+  id String @id @default(cuid()) @map(name:"TrackId")
   Name String
   Album Album? @map(name: "AlbumId")
   MediaType MediaType @map(name: "MediaTypeId")
   Genre Genre? @map(name: "GenreId")
@@ -31,13 +31,13 @@
   UnitPrice Float
 }
 model Genre {
-  id Int @id @map(name:"GenreId")
+  id String @id @default(cuid()) @map(name:"GenreId")
   Name String?
   Tracks Track[]
 }
 model MediaType {
-  id Int @id @map(name:"MediaTypeId")
+  id String @id @default(cuid()) @map(name:"MediaTypeId")
   Name String
 }
```

## Photon Usage

You can use a specific Photon built for this migration (20190924170714-string-ids)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190924170714-string-ids'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
