# Migration `20190923175854-init`

This migration has been generated by Julius de Bruijn at 9/23/2019, 5:58:54 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "benchmark"."Artist" (
  "ArtistId" SERIAL,
  "Name" text   ,
  PRIMARY KEY ("ArtistId")
);

CREATE TABLE "benchmark"."Album" (
  "AlbumId" SERIAL,
  "Title" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("AlbumId")
);

CREATE TABLE "benchmark"."Track" (
  "Composer" text   ,
  "Milliseconds" integer NOT NULL DEFAULT 0 ,
  "Name" text NOT NULL DEFAULT '' ,
  "TrackId" SERIAL,
  "UnitPrice" Decimal(65,30) NOT NULL DEFAULT 0 ,
  PRIMARY KEY ("TrackId")
);

CREATE TABLE "benchmark"."Genre" (
  "GenreId" SERIAL,
  "Name" text   ,
  PRIMARY KEY ("GenreId")
);

CREATE TABLE "benchmark"."MediaType" (
  "MediaTypeId" SERIAL,
  "Name" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("MediaTypeId")
);

ALTER TABLE "benchmark"."Album" ADD COLUMN "ArtistId" integer   REFERENCES "benchmark"."Artist"("ArtistId") ON DELETE SET NULL;

ALTER TABLE "benchmark"."Track" ADD COLUMN "AlbumId" integer   REFERENCES "benchmark"."Album"("AlbumId") ON DELETE SET NULL,
ADD COLUMN "GenreId" integer   REFERENCES "benchmark"."Genre"("GenreId") ON DELETE SET NULL;

ALTER TABLE "benchmark"."MediaType" ADD COLUMN "track" integer   REFERENCES "benchmark"."Track"("TrackId") ON DELETE SET NULL;
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..20190923175854-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,43 @@
+generator photon {
+  provider = "photonjs"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = "postgresql://postgres:prisma@localhost:5432/postgres?schema=benchmark"
+}
+
+model Artist {
+  id Int @id @map(name:"ArtistId")
+  Name String?
+  Albums Album[]
+}
+
+model Album {
+  id Int @id @map(name:"AlbumId")
+  Title String
+  Artist Artist @map(name:"ArtistId")
+  Tracks Track[]
+}
+
+model Track {
+  id Int @id @map(name:"TrackId")
+  Name String
+  Album Album? @map(name: "AlbumId")
+  MediaType MediaType @map(name: "MediaTypeId")
+  Genre Genre? @map(name: "GenreId")
+  Composer String?
+  Milliseconds Int
+  UnitPrice Float
+}
+
+model Genre {
+  id Int @id @map(name:"GenreId")
+  Name String?
+  Tracks Track[]
+}
+
+model MediaType {
+  id Int @id @map(name:"MediaTypeId")
+  Name String
+}
```

## Photon Usage

You can use a specific Photon built for this migration (20190923175854-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190923175854-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
